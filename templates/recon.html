{% extends "layout.html" %}
{% block content %}
<div class="hex-container" style="margin-bottom: 30px;">
    <h2><span style="color: var(--hex-gold);">OPPONENT SCOUTING:</span> Automated Recon</h2>
    <form method="POST" style="display: flex; gap: 15px;">
        <select name="team_id" class="btn-hex" style="flex-grow: 1;">
            {% for team in teams %}
                <option value="{{ team.id }}">{{ team.name }}</option>
            {% endfor %}
        </select>
        <button type="submit" class="btn-hex">Scour Opponent</button>
    </form>
</div>

{% if report %}
    <div style="display: grid; grid-template-columns: 1.5fr 1fr; gap: 20px; margin-bottom: 20px;">
        <div class="hex-container" style="border-left: 5px solid var(--hex-gold);">
            <h3 style="color: var(--hex-gold);">HOW TO WIN: COUNTER-STRATEGY</h3>
            {% for rec in report.recommendations %}
                <div style="background: rgba(200,170,110,0.1); padding: 10px; margin-bottom: 10px;">{{ rec | safe }}</div>
            {% endfor %}
        </div>

        <div class="hex-container">
            <h3>MOST RECENT COMPS</h3>
            {% for hero, count in report.common_comps.items() %}
                <p>{{ hero }}: {{ count }} Games</p>
            {% endfor %}
        </div>
    </div>

    <div class="hex-container" style="margin-bottom: 20px;">
        <h3 style="color: var(--hex-teal);">PLAYER TENDENCIES</h3>
        <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px;">
            {% for p in report.player_stats %}
                <div style="border: 1px solid #444; padding: 10px; text-align: center;">
                    <strong>{{ p.name }}</strong><br>
                    <small>Prefers: {{ p.top_hero }}</small><br>
                    <small>KDA: {{ p.avg_kda }}</small>
                </div>
            {% endfor %}
        </div>
    </div>
{% endif %}
<script src="{{ url_for('static', filename='js/recon.js') }}"></script>
{% endblock %}
    

